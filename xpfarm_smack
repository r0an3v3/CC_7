--v0.3

local power = turtle.getFuelLevel() > 10

local fuel = {"coal", "charcoal", "lava"}

function isfuel(c)
    for d=1,#fuel do
        if string.find(c, fuel[d]) then
            return true
        else
            return false
        end
    end
end

function gas()
    for a=1,16 do
        turtle.select(a)
        if turtle.refuel() then
            print("refueled from ", a)
        end
    end
end

function dump()
    for b=1,16 do
        for uu=1,#fuel do
            if isfuel(turtle.getItemDetail(b).name, fuel[uu]) then
                print("fuel, skipping")
            end
        end
        turtle.dropDown()
    end
end

function trygas()
    for m=1,16 do
        turtle.select(m)
        if turtle.refuel(m) then
            print("refueled from ", m)
            return true
        end
    end
    return false
end

if power == false then
    print("no fuel, attempting refuel")
    trygas()
end

while power do

    turtle.attack()
    turtle.suck()

    dump()

    power = turtle.getFuelLevel() > 10

    if power == false then
        print("low fuel, attempting refuel")
        trygas()
    end

end
