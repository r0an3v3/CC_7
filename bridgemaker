--on switch based on fuel level
--fills up "holes" based on length to make bridge
--slots 1-4 hold fuel, 5-16 hold blocks

local length = 4

function moveCheck()
    if turtle.detect() then
        printError("something in the way")
        error()
    else
        print("moving forward")
        turtle.forward()
    end
end

function turnCheck(b)
    print("turning!")
    if b == 1 then
        turtle.turnLeft()
    else
        turtle.turnRight()
    end
end

function filler(a)
    for i=5,16 do
        turtle.select(i)
        if turtle.placeUp() then
            print("placing from ", i)
            break
        end
    end
end

while true do
    while turtle.getFuelLevel() > 10 do
        
        print("fuelcount: ", turtle.getFuelLevel())

        turtle.turnRight()

        for h=1,length do
            filler(1)
            moveCheck()
        end
        turnCheck(1)
        moveCheck()
        turnCheck(1)
        for j=1,length do
            filler(2)
            moveCheck()
        end
        turnCheck(2)
        moveCheck()
        turnCheck(2)
    end

    print("attempting to refuel")

    for n=1,4 do
        turtle.select(n)
        if turtle.refuel() then
            print("refueled from slot ", n)
            break
        end
    end
    if turtle.getFuelLevel() < 10 then
        printError("out of fuel, shutting down")
        error()
    end
end
